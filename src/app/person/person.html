
@if(loading()){
  <p>Loading...</p>
}

@if(error()){
  <p class="text danger">Something went wrong!</p>
}

<h3>Add/update Person</h3>
<form [formGroup]="personForm" (ngSubmit)="onSubmit()" class="mb-3 d-inline-flex gap-2">
        <input type="hidden" formControlName="id">
        <div>
             <input type="text" formControlName="firstName" class="form-control" placeholder="First Name">
             @if(f.firstName.invalid && (f.firstName.touched || f.firstName.dirty)){
               @if(f.firstName.errors?.["required"]) {
                <p class="text-danger">First Name is required</p>
               }
             }
          </div>

          <div>
             <input type="text" formControlName="lastName" class="form-control" placeholder="Last Name">
            @if(f.lastName.invalid && (f.lastName.touched || f.lastName.dirty)){
               @if(f.lastName.errors?.["required"]) {
                <p class="text-danger">Last Name is required</p>
               }
             }

          </div>

          <div>
            <div class="d-inline-flex gap-2">
              <button  type="submit" class="btn btn-info" [disabled]="personForm.invalid">Save</button>
              <button type="button" class="btn btn-primary" (click)="onReset()">Reset</button>
            </div>
          </div>
      </form>
      @if (!people() || people().length < 1){
        <h5>No data found</h5>
      } @else {
      <div class="list">
        <h3>People</h3>
          <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Actions</th>
                  </tr>
                </thead>

                <tbody>
                  @for (person of people(); track person.id) {


                   <tr>
                      <td>{{person.firstName}}</td>
                      <td>{{person.lastName}}</td>
                      <td>
                        <div class="d-inline-flex gap-2">
                        <a (click)="onEdit(person)" class="btn btn-info">Edit</a>
                        <a (click)="(onDelete(person))" class="btn btn-danger">Delete</a>
                        </div>
                      </td>
                   </tr>
                   }
                </tbody>
          </table>
      </div>
      }
